<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>KOTH Transcript Viewer</title>
  <style>
    * { box-sizing: border-box; }
    body {
      background: #1a1a1a;
      color: #e0e0e0;
      font-family: sans-serif;
      margin: 0;
      height: 100vh;
      display: flex;
      flex-direction: column;
    }
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 16px 24px;
      background: #111;
      border-bottom: 1px solid #333;
    }
    #main {
      flex: 1;
      display: flex;
      overflow: hidden;
    }
    #left {
      width: 260px;
      min-width: 260px;
      max-width: 260px;
      background: #141414;
      padding: 20px;
      overflow-y: auto;
      border-right: 1px solid #333;
    }
    #right {
      flex: 1;
      overflow-y: auto;
      padding: 24px;
    }
    input {
      width: 100%;
      padding: 8px;
      margin-bottom: 16px;
      font-size: 1rem;
      background: #222;
      border: 1px solid #444;
      color: #eee;
    }
    ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    li {
      margin: 6px 0;
    }
    a {
      color: #36a3d9;
      text-decoration: none;
    }
    a:hover {
      text-decoration: underline;
    }
    mark {
      background: yellow;
      color: black;
    }
    .result-line {
      margin: 10px 0;
      padding: 10px;
      background: #222;
      border-left: 3px solid #36a3d9;
    }
    .result-episode {
      font-weight: bold;
      color: #999;
    }
    .quote {
      margin-top: 4px;
    }
    #transcript {
      margin-top: 20px;
    }
    .mode-toggle {
      font-size: 1rem;
      padding: 6px 12px;
      background: #333;
      border: 1px solid #666;
      color: #ccc;
      cursor: pointer;
    }
    .mode-toggle:hover {
      background: #444;
    }
  </style>
</head>
<body>
  <header>
    <h1>KOTH Transcript Viewer</h1>
    <button class="mode-toggle" onclick="toggleMode()" id="modeBtn">Switch to Search View</button>
  </header>
  <div id="main">
    <div id="left">
      <input type="text" id="search" placeholder="Search all transcripts..." style="display: none;" />
      <ul id="episodeList"></ul>
    </div>
    <div id="right">
      <h2 id="transcript-title">Transcript</h2>
      <div id="transcript">Select an episode to load or switch to Search View above.</div>
    </div>
  </div>

  <script>
    const folder = 'scripts/';
    const files = [
      "King of the Hill S01E01 Pilot.txt",
"King of the Hill S01E02 Square Peg.txt",
"King of the Hill S01E03 Order of the Straight Arrow.txt",
"King of the Hill S01E04 Hank's Got the Willies.txt",
"King of the Hill S01E05 Luanne's Saga.txt",
"King of the Hill S01E06 Hank's Unmentionable Problem.txt",
"King of the Hill S01E07 Westie Side Story.txt",
"King of the Hill S01E08 Shins of the Father.txt",
"King of the Hill S01E09 Peggy the Boggle Champ.txt",
"King of the Hill S01E10 Keeping Up with Our Joneses.txt",
"King of the Hill S01E11 King of the Ant Hill.txt",
"King of the Hill S01E12 Plastic White Female.txt",
"King of the Hill S02E01 How to Fire a Rifle Without Really Trying.txt",
"King of the Hill S02E02 Texas City Twister.txt",
"King of the Hill S02E03 The Arrowhead.txt",
"King of the Hill S02E04 Hilloween.txt",
"King of the Hill S02E05 Jumpin' Crack Bass.txt",
"King of the Hill S02E06 Husky Bobby.txt",
"King of the Hill S02E07 The Man Who Shot Cane Skretteberg.txt",
"King of the Hill S02E08 The Son That Got Away.txt",
"King of the Hill S02E09 The Company Man.txt",
"King of the Hill S02E10 Bobby Slam.txt",
"King of the Hill S02E11 The Unbearable Blindness of Laying.txt",
"King of the Hill S02E12 Meet the Manger Babies.txt",
"King of the Hill S02E13 Snow Job.txt",
"King of the Hill S02E14 I Remember Mono.txt",
"King of the Hill S02E15 Three Days of the Kahndo.txt",
"King of the Hill S02E16 Traffic Jam.txt",
"King of the Hill S02E17 Hank's Dirty Laundry.txt",
"King of the Hill S02E18 The Final Shinsult.txt",
"King of the Hill S02E19 Leanne's Saga.txt",
"King of the Hill S02E20 Junkie Business.txt",
"King of the Hill S02E21 Life In The Fast Lane, Bobby's Saga.txt",
"King of the Hill S02E22 Peggy's Turtle Song.txt",
"King of the Hill S02E23 Propane Boom.txt",
"King of the Hill S03E01 Death of a Propane Salesman.txt",
"King of the Hill S03E02 And They Call It Bobby Love.txt",
"King of the Hill S03E03 Peggy's Headche.txt",
"King of the Hill S03E04 Pregnant Paws.txt",
"King of the Hill S03E05 Next of Shin.txt",
"King of the Hill S03E06 Peggy Pageant Fever.txt",
"King of the Hill S03E07 Nine Pretty Darn Angry Men.txt",
"King of the Hill S03E08 Good Hill Hunting.txt",
"King of the Hill S03E09 Pretty, Pretty Dresses.txt",
"King of the Hill S03E10 A Fire-fighting We Will Go.txt",
"King of the Hill S03E11 To Spank with Love.txt",
"King of the Hill S03E12 Three Coaches and a Bobby.txt",
"King of the Hill S03E13 De-Kahnstructing Henry.txt",
"King of the Hill S03E14 The Wedding of Bobby Hill.txt",
"King of the Hill S03E15 Sleight of Hank.txt",
"King of the Hill S03E16 Return to La Grunta.txt",
"King of the Hill S03E17 Escape from Party Island.txt",
"King of the Hill S03E18 Love Hurts and So Does Art.txt",
"King of the Hill S03E19 Hank's Cowboy Movie.txt",
"King of the Hill S03E20 Dog Dale Afternoon.txt",
"King of the Hill S03E21 Revenge of the Lutefisk.txt",
"King of the Hill S03E22 Death and Texas.txt",
"King of the Hill S03E23 Wings of the Dope.txt",
"King of the Hill S03E24 Take Me Out of the Ball Game.txt",
"King of the Hill S03E25 As Old as the Hills.txt",
"King of the Hill S04E01 Peggy Hill The Decline and Fall.txt",
"King of the Hill S04E02 Cotton's Plot.txt",
"King of the Hill S04E03 Bills Are Made to Be Broken.txt",
"King of the Hill S04E04 Little Horrors of Shop.txt",
"King of the Hill S04E05 Aisle 8A.txt",
"King of the Hill S04E06 A Beer Can Named Desire.txt",
"King of the Hill S04E07 Happy Hank's Giving.txt",
"King of the Hill S04E08 Not in My Back Hoe.txt",
"King of the Hill S04E09 To Kill a Ladybird.txt",
"King of the Hill S04E10 Hillennium.txt",
"King of the Hill S04E11 Old Glory.txt",
"King of the Hill S04E12 Rodeo Days.txt",
"King of the Hill S04E13 Hanky Panky.txt",
"King of the Hill S04E14 High Anxiety.txt",
"King of the Hill S04E15 Naked Ambition.txt",
"King of the Hill S04E16 Movin' on Up.txt",
"King of the Hill S04E17 Bill of Sales.txt",
"King of the Hill S04E18 Won't You Pimai Neighbor.txt",
"King of the Hill S04E19 Hank's Bad Hair Day.txt",
"King of the Hill S04E20 Meet the Propaniacs.txt",
"King of the Hill S04E21 Nancy Boys.txt",
"King of the Hill S04E22 Flush with Power.txt",
"King of the Hill S04E23 Peggy's Magic Sex Feet.txt",
"King of the Hill S04E24 Peggy's Fan Fair.txt",
"King of the Hill S05E01 The Perils of Polling.txt",
"King of the Hill S05E02 The Buck Stops Here.txt",
"King of the Hill S05E03 I Don't Want to Wait....txt",
"King of the Hill S05E04 Spin the Choice.txt",
"King of the Hill S05E05 Peggy Makes the Big Leagues.txt",
"King of the Hill S05E06 When Cotton Comes Marching Home.txt",
"King of the Hill S05E07 What Makes Bobby Run.txt",
"King of the Hill S05E08 'Twas the Nut Before Christmas.txt",
"King of the Hill S05E09 Chasing Bobby.txt",
"King of the Hill S05E10 Yankee Hankee.txt",
"King of the Hill S05E11 Hank and the Great Glass Elevator.txt",
"King of the Hill S05E12 Now Who's the Dummy.txt",
"King of the Hill S05E13 Ho, Yeah.txt",
"King of the Hill S05E14 The Exterminator.txt",
"King of the Hill S05E15 Luanne Virgin 2.0.txt",
"King of the Hill S05E16 Hank's Choice.txt",
"King of the Hill S05E17 It's Not Easy Being Green.txt",
"King of the Hill S05E18 The Trouble with Gribbles.txt",
"King of the Hill S05E19 Hank's Back Story.txt",
"King of the Hill S05E20 Kidney Boy and Hamster Girl A Love Story.txt",
"King of the Hill S06E01 Bobby Goes Nuts.txt",
"King of the Hill S06E02 Soldier of Misfortune.txt",
"King of the Hill S06E03 Lupe's Revenge.txt",
"King of the Hill S06E04 The Father, the Son, and J.C..txt",
"King of the Hill S06E05 Father of the Bribe.txt",
"King of the Hill S06E06 I'm with Cupid.txt",
"King of the Hill S06E07 Torch Song Hillogy.txt",
"King of the Hill S06E08 Joust Like a Woman.txt",
"King of the Hill S06E09 The Bluegrass Is Always Greener.txt",
"King of the Hill S06E10 The Substitute Spanish Prisoner.txt",
"King of the Hill S06E11 Unfortunate Son.txt",
"King of the Hill S06E12 Are You There God, It's Me Margaret Hill.txt",
"King of the Hill S06E13 Tankin' It to the Streets.txt",
"King of the Hill S06E14 Of Mice and Little Green Men.txt",
"King of the Hill S06E15 Man without a Country Club.txt",
"King of the Hill S06E16 Beer and Loathing.txt",
"King of the Hill S06E17 Fun with Jane and Jane.txt",
"King of the Hill S06E18 My Own Private Rodeo.txt",
"King of the Hill S06E19 Sug Night.txt",
"King of the Hill S06E20 Dang Ol' Love.txt",
"King of the Hill S06E21+E22 Returning Japanese Pt 1 +Pt 2.txt",
"King of the Hill S07E01 Get Your Freak Off.txt",
"King of the Hill S07E02 The Fat and the Furious.txt",
"King of the Hill S07E03 Bad Girls, Bad Girls, Whatcha Gonna Do.txt",
"King of the Hill S07E04 Goodbye Normal Jeans.txt",
"King of the Hill S07E05 Dances With Dogs.txt",
"King of the Hill S07E06 The Son Also Roses.txt",
"King of the Hill S07E07 The Texas Skilsaw Massacre.txt",
"King of the Hill S07E08 Full Metal Dust Jacket.txt",
"King of the Hill S07E09 Pigmalion.txt",
"King of the Hill S07E10 Megalo Dale.txt",
"King of the Hill S07E11 Boxing Luanne.txt",
"King of the Hill S07E12 Vision Quest.txt",
"King of the Hill S07E13 Queasy Rider.txt",
"King of the Hill S07E14 Board Games.txt",
"King of the Hill S07E15 An Officer and a Gentle Boy.txt",
"King of the Hill S07E16 The Miseducation of Bobby Hill.txt",
"King of the Hill S07E17 The Good Buck.txt",
"King of the Hill S07E18 I Never Promised You an Organic Garden.txt",
"King of the Hill S07E19 Be True to Your Fool.txt",
"King of the Hill S07E20 Racist Dawg.txt",
"King of the Hill S07E21 Night and Deity.txt",
"King of the Hill S07E22 Maid in Arlen.txt",
"King of the Hill S07E23 The Witches of East Arlen.txt",
"King of the Hill S08E01 Patch Boomhauer.txt",
"King of the Hill S08E02 Reborn to Be Wild.txt",
"King of the Hill S08E03 New Cowboy on the Block.txt",
"King of the Hill S08E04 The Incredible Hank.txt",
"King of the Hill S08E05 Flirting with the Master.txt",
"King of the Hill S08E06 After the Mold Rush.txt",
"King of the Hill S08E07 Livin' on Reds, Vitamin C and Propane.txt",
"King of the Hill S08E08 Rich Hank, Poor Hank.txt",
"King of the Hill S08E09 Ceci N'est Pas une King of the Hill.txt",
"King of the Hill S08E10 That's What She Said.txt",
"King of the Hill S08E11 My Hair Lady.txt",
"King of the Hill S08E12 Phish and Wildlife.txt",
"King of the Hill S08E13 Cheer Factor.txt",
"King of the Hill S08E14 Dale Be Not Proud.txt",
"King of the Hill S08E15 Apres Hank, le Deluge.txt",
"King of the Hill S08E16 Daletech.txt",
"King of the Hill S08E17 How I Learned to Stop Worrying and Love the Alamo.txt",
"King of the Hill S08E18 Girl, You'll Be a Giant Soon.txt",
"King of the Hill S08E19 Stressed for Success.txt",
"King of the Hill S08E20 Hank's Back.txt",
"King of the Hill S08E21 The Redneck on Rainey Street.txt",
"King of the Hill S08E22 Talking Shop.txt",
"King of the Hill S09E01 A Rover Runs Through It.txt",
"King of the Hill S09E02 Ms. Wakefield.txt",
"King of the Hill S09E03 Death Buys a Timeshare.txt",
"King of the Hill S09E04 Yard, She Blows.txt",
"King of the Hill S09E05 Dale to the Chief.txt",
"King of the Hill S09E06 The Petriot Act.txt",
"King of the Hill S09E07 Enrique-cilable Differences.txt",
"King of the Hill S09E08 Mutual of Omabwah.txt",
"King of the Hill S09E09 Care-Takin' Care of Business.txt",
"King of the Hill S09E10 Arlen City Bomber.txt",
"King of the Hill S09E11 Redcorn Gambles with His Future.txt",
"King of the Hill S09E12 Smoking and the Bandit.txt",
"King of the Hill S09E13 Gone With The Windstorm.txt",
"King of the Hill S09E14 Bobby On Track.txt",
"King of the Hill S09E15 It Ain't Over Till The Fat Neighbor Sings.txt",
"King of the Hill S10E01 Hank's on Board.txt",
"King of the Hill S10E02 Bystand Me.txt",
"King of the Hill S10E03 Bill's House.txt",
"King of the Hill S10E04 Harlottown.txt",
"King of the Hill S10E05 A Portrait of the Artist as a Young Clown.txt",
"King of the Hill S10E06 Orange You Sad I Did Say Banana.txt",
"King of the Hill S10E07 You Gotta Believe (in Moderation).txt",
"King of the Hill S10E08 Business Is Picking Up.txt",
"King of the Hill S10E09 The Year of Washing Dangerously.txt",
"King of the Hill S10E10 Hank Fixes Everything.txt",
"King of the Hill S10E11 Church Hopping.txt",
"King of the Hill S10E12 24 Hour Propane People.txt",
"King of the Hill S10E13 The Texas Panhandler.txt",
"King of the Hill S10E14 Hank's Bully.txt",
"King of the Hill S10E15 Edu-macating Lucky.txt",
"King of the Hill S11E01 The Peggy Horror Picture Show.txt",
"King of the Hill S11E02 Serpunt.txt",
"King of the Hill S11E03 Blood and Sauce.txt",
"King of the Hill S11E04 Luanne Gets Lucky.txt",
"King of the Hill S11E05 Hank Gets Dusted.txt",
"King of the Hill S11E06 Glen Peggy Glen Ross.txt",
"King of the Hill S11E07 The Passion of Dauterive.txt",
"King of the Hill S11E08 Grand Theft Arlen.txt",
"King of the Hill S11E09 Peggy's Gone to Pots.txt",
"King of the Hill S11E10 Hair Today, Gone Today.txt",
"King of the Hill S11E11 Bill, Bulk and the Body Buddies.txt",
"King of the Hill S11E12 Lucky's Wedding Suit.txt",
"King of the Hill S12E01 Suite Smells of Excess.txt",
"King of the Hill S12E02 Bobby Rae.txt",
"King of the Hill S12E03 The Powder Puff Boys.txt",
"King of the Hill S12E04 Four Wave Intersection.txt",
"King of the Hill S12E05 Death Picks Cotton.txt",
"King of the Hill S12E06 Raise the Steaks.txt",
"King of the Hill S12E07 Tears of an Inflatable Clown.txt",
"King of the Hill S12E08 The Minh Who Knew Too Much.txt",
"King of the Hill S12E09 Dream Weaver.txt",
"King of the Hill S12E10 Doggone Crazy.txt",
"King of the Hill S12E11 Trans-Fascism.txt",
"King of the Hill S12E12 Untitled Blake McCormick Project.txt",
"King of the Hill S12E13 The Accidental Terrorist.txt",
"King of the Hill S12E14 Lady and Gentrification.txt",
"King of the Hill S12E15 Behind Closed Doors.txt",
"King of the Hill S12E16 Pour Some Sugar on Kahn.txt",
"King of the Hill S12E17 Six Characters in Search of a House.txt",
"King of the Hill S12E18 The Courtship of Joseph's Father.txt",
"King of the Hill S12E19 Strangeness on a Train.txt",
"King of the Hill S12E20 Cops and Robert.txt",
"King of the Hill S12E21 It Came from the Garage.txt",
"King of the Hill S12E22 Life A Loser's Manual.txt",
"King of the Hill S13E01 Dia-BILL-ic Shock.txt",
"King of the Hill S13E02 Earthy Girls Are Easy.txt",
"King of the Hill S13E03 Square-Footed Monster.txt",
"King of the Hill S13E04 Lost in MySpace.txt",
"King of the Hill S13E05 No Bobby Left Behind.txt",
"King of the Hill S13E06 A Bill Full of Dollars.txt",
"King of the Hill S13E07 Straight as an Arrow.txt",
"King of the Hill S13E08 Lucky See, Monkey Do.txt",
"King of the Hill S13E09 What Happens at the National Propane Gas Convention in Memphis.txt",
"King of the Hill S13E10 Master of Puppets.txt",
"King of the Hill S13E11 Bwah My Nose.txt",
"King of the Hill S13E12 Uncool Customer.txt",
"King of the Hill S13E13 Nancy Does Dallas.txt",
"King of the Hill S13E14 Born Again on the Fourth of July.txt",
"King of the Hill S13E15 Serves Me Right for Giving General George S. Patton the Bathroom Key.txt",
"King of the Hill S13E16 Bad News Bill.txt",
"King of the Hill S13E17 Manger Baby Einstein.txt",
"King of the Hill S13E18 Uh-Oh Canada.txt",
"King of the Hill S13E19 The Boy Can't Help It.txt",
"King of the Hill S13E20 To Sirloin with Love.txt",
"King of the Hill S13E21 The Honeymooners.txt",
"King of the Hill S13E22 Bill Gathers Moss.txt",
"King of the Hill S13E23 When Joseph Met Lori, and Made Out with Her in the Janitor s Closet.txt",
"King of the Hill S13E24 Just Another Manic Kahn-Day.txt"
    ];
    const transcripts = {};
    const lineIndex = [];
    const transcriptEl = document.getElementById("transcript");
    const transcriptTitleEl = document.getElementById("transcript-title");
    const episodeList = document.getElementById("episodeList");
    const searchInput = document.getElementById("search");
    const modeBtn = document.getElementById("modeBtn");

    let mode = "browse";

    function toggleMode() {
      mode = (mode === "browse") ? "search" : "browse";
      modeBtn.textContent = mode === "browse" ? "Switch to Search View" : "Switch to Browse View";
      searchInput.style.display = mode === "search" ? "block" : "none";
      episodeList.style.display = mode === "browse" ? "block" : "none";
      transcriptTitleEl.textContent = mode === "browse" ? "Transcript" : "Search Results";
      transcriptEl.innerHTML = mode === "browse" ? "Select an episode to load." : "Type at least 2 characters to search.";
    }

    files.forEach(file => {
      fetch(folder + file)
        .then(res => res.text())
        .then(text => {
          transcripts[file] = text;
          const lines = text.split(/\r?\n/);
          lines.forEach((line, i) => {
            if (line.trim()) {
              lineIndex.push({ file, lineNumber: i + 1, text: line });
            }
          });
        });

      const li = document.createElement("li");
      const a = document.createElement("a");
      a.href = "#";
      a.textContent = file.replace("King of the Hill ", "").replace(".txt", "");
      a.onclick = () => {
        transcriptTitleEl.textContent = a.textContent;
        transcriptEl.textContent = transcripts[file] || "Loading...";
      };
      li.appendChild(a);
      episodeList.appendChild(li);
    });

    function highlight(text, query) {
      return text.replace(new RegExp(`(${query})`, 'gi'), '<mark>$1</mark>');
    }

    searchInput.addEventListener("input", e => {
      const query = e.target.value.trim().toLowerCase();
      if (!query || query.length < 2) {
        transcriptEl.innerHTML = "Type at least 2 characters to search.";
        return;
      }
      const matches = lineIndex.filter(entry => entry.text.toLowerCase().includes(query));
      if (!matches.length) {
        transcriptEl.innerHTML = "No matches found.";
        return;
      }
      transcriptEl.innerHTML = matches.slice(0, 200).map(match => `
        <div class="result-line">
          <div class="result-episode">${match.file.replace("King of the Hill ", "").replace(".txt", "")}</div>
          <div class="quote">${highlight(match.text, query)}</div>
        </div>
      `).join('');
    });
  </script>
</body>
</html>
